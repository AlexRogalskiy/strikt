package strikt.opentest4j

import org.opentest4j.AssertionFailedError
import org.opentest4j.MultipleFailuresError
import strikt.api.reporting.Reportable
import strikt.api.reporting.Result
import strikt.api.reporting.writeToString

fun Reportable.toError(): Throwable {
  return if (this is Result && results.isEmpty()) {
    AssertionFailedError(writeToString(), expected, actual)
  } else {
    MultipleFailuresError(writeToString(), results.map { it.toError() })
  }
}